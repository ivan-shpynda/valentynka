const block_0 = [
  [['–ù–µ –º–æ–∂—É —É—è–≤–∏—Ç–∏ —Å–≤–æ–≥–æ –∂–∏—Ç—Ç—è –±–µ–∑ —Ç–≤–æ—ó—Ö '], [' üåº']],
  [['–ö–æ–ª–∏ –º–µ–Ω—ñ –∑–∞–º–∞–ª–æ —Ç–≤–æ—ó—Ö '], [', –º–µ–Ω–µ –æ–≥–æ—Ä—Ç–∞—î –∂—É—Ä–±–∏–Ω–∫–∞ üò•']],
  [['–ë–µ–∑ —Ç–≤–æ—ó—Ö '], [' –º–æ—ó –±—É–¥–Ω—ñ, –Ω–∞—á–µ "–ù—É–¥–æ—Ç–∞" –ñ–∞–Ω–∞-–ü–æ–ª—è –°–∞—Ä—Ç—Ä–∞ üí©']],
  [['–•–æ—á—É —Ç–≤–æ—ó—Ö '], [', —è–∫ –°–∞—É—Ä–æ–Ω —Ö–æ—á–µ –ø–µ—Ä—Å—Ç–µ–Ω—å üî•']],
  [['–ñ–∏—Ç—Ç—è –ø–æ–∑–±–∞–≤–ª–µ–Ω–µ —Ç–≤–æ—ó—Ö '], [', –Ω–∞—á–µ —Ä–æ–∑–º–∏—Ç–∞ —á–æ—Ä–Ω–æ-–±—ñ–ª–∞ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ—ñ—è üì∑']]
];

const options_0 = ['–ø–æ—Ü—ñ–ª—É–Ω–∫—ñ–≤', '–ø–µ—á–µ–Ω—å–æ–∫', '—Å—ñ–¥–Ω–∏—á–æ–∫', '–æ–±—ñ–π–º—ñ–≤', '–æ—á–µ–π', '–∂–∞—Ä—Ç—ñ–≤', '–¥—É–º–æ–∫', '–ø—ñ—Å–µ–Ω—å','—â—ñ—á–æ–∫', '—É—Å—Ç'];

const block_1 = [
  [['–Ø–∫–±–∏ —è –Ω–µ –±—É–≤ –ª—é–¥–∏–Ω–æ—é, —Ç–æ —Ö–æ—Ç—ñ–≤ –±–∏ –±—É—Ç–∏ —Ç–≤–æ—ó–º '], [' üíï']],
  [['–ë—É—Ç–∏ —Ç–≤–æ—ó–º '], [' - —Ü–µ –º–æ—è –Ω—ñ—á–Ω–∞ —Ñ–∞–Ω—Ç–∞–∑—ñ—è ‚ù§Ô∏è‚Äçüî•']],
  [['–í –º–æ—ó—Ö —Å–Ω–∞—Ö —Ç–∏ –∂–∏–≤–µ—à —É —á–∞—Ä—ñ–≤–Ω–æ–º—É –∑–∞–º–∫—É, –∞ —è —î —Ç–≤–æ—ó–º '], [' üèØ']],
  [['–í –º–∏–Ω—É–ª–æ–º—É –∂–∏—Ç—Ç—ñ —è –±—É–≤ —Ç–≤–æ—ó–º '], [' üçÄ']],
  [['–í —Ä–æ–ª—å–æ–≤–∏—Ö —ñ–≥—Ä–∞—Ö —è –±—É–¥—É —Ç–≤–æ—ó–º '], [', –∞ —Ç–∏ - –º–æ—î—é –∫–≤—ñ—Ç–æ—á–∫–æ—é üå∫']]
];

const options_1 = [ '—Ö–æ–º º—è—á–∫–æ–º', '—É–ª—é–±–ª–µ–Ω–∏–º –º—É–∑–∏—á–Ω–∏–º —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–º', '–∫–æ—Ç–∏–∫–æ–º', '–∞–ª—å—Ç–µ—Ä –µ“ë–æ', '—É–ª—é–±–ª–µ–Ω–∏–º –∫–Ω–∏–∂–∫–æ–≤–∏–º –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–º', '–Ω–∞–π–∫—Ä–∞—â–∏–º –º–æ–º–µ–Ω—Ç–æ–º', '–Ω–∞—Ç—Ö–Ω–µ–Ω–Ω—è–º', '–∫–æ—Ü–∏–∫–æ–º', '–≤–∞–∑–æ–Ω–æ—á–∫–æ–º', '—É–ª—é–±–ª–µ–Ω–∏–º —Å–µ–Ω–¥–≤—ñ—á–µ–º' ];

const block_2 = [
  [['–í –Ω–∞–π—â–∞—Å–ª–∏–≤—ñ—à–∏–π –¥–µ–Ω—å —Å–≤–æ–≥–æ –∂–∏—Ç—Ç—è —è –±—É–¥—É '], [' –∑ —Ç–æ–±–æ—é ‚ù§Ô∏è']],
  [['–ú–∞—Ç–∏ –º–æ–∂–ª–∏–≤—ñ—Å—Ç—å '], [' –∑ —Ç–æ–±–æ—é - —Ü–µ —Å–ø—Ä–∞–≤–∂–Ω—ñ–π –ø–æ–¥–∞—Ä—É–Ω–æ–∫ –¥–æ–ª—ñ ‚ù£Ô∏è']],
  [['–•–æ—Ç—ñ–≤ –±–∏ '], [' –∑ —Ç–æ–±–æ—é –≤—ñ–¥ 8 —Ä–∞–Ω–∫—É —ñ –¥–æ –∫–æ–º–µ–Ω–¥–∞–Ω—Ç—Å—å–∫–æ—ó –≥–æ–¥–∏–Ω–∏ üíò']],
  [['–ö–æ–ª–∏ —è –±—É–¥—É '], [' –∑ —Ç–æ–±–æ—é, —É –º–µ–Ω–µ –±—É–¥–µ –ø–µ—Ä–µ–¥–æ–∑—É–≤–∞–Ω–Ω—è –¥–æ—Ñ–∞–º—ñ–Ω–æ–º ‚ú®']],
  [['–Ø–∫—â–æ –º–µ–Ω—ñ —Å–∫–∞–∂—É—Ç—å, —â–æ —è –Ω—ñ–∫–æ–ª–∏ –Ω–µ –∑–º–æ–∂—É '], [' –∑ —Ç–æ–±–æ—é, —è –ø–æ—á–Ω—É —Ä–µ–≤–æ–ª—é—Ü—ñ—é üí•']]
];

const options_2 = ['—Ö–æ–¥–∏—Ç–∏ –ø–æ –≥–æ—Ä–∞—Ö', '–ª—é–±–∏—Ç–∏—Å—å', '—á–∏—Ç–∞—Ç–∏ –æ–¥–Ω—É —ñ —Ç—É –∂ –∫–Ω–∏–≥—É', '–æ–±—ñ–π–º–∞—Ç–∏—Å—å', '–¥–∏–≤–∏—Ç–∏—Å—å —Ñ–∞–π–Ω—ñ —Ñ—ñ–ª—å–º–∏', '—Å–º—ñ—è—Ç–∏—Å—å –∑ –∂–∞—Ä—Ç—ñ–≤ –ø–∞–Ω–∞ –†–æ–º–∞–Ω–∞', '—Å–ª—É—Ö–∞—Ç–∏ –¥–∂–∞–∑', '–≥–æ–≤–æ—Ä–∏—Ç–∏ –Ω–∞ —Ñ—ñ–ª–æ—Å–æ—Ñ—Å—å–∫—ñ —Ç–µ–º–∏', '–≥—É–ª—è—Ç–∏ –ª—å–≤—ñ–≤—Å—å–∫–∏–º–∏ –ø–∞—Ä–∫–∞–º–∏', '—Å–∫–ª–∞–¥–∞—Ç–∏ –ø–ª–∞–Ω –ø–æ—ó–∑–¥–∫–∏ –¥–æ –ú–æ–Ω-–°–µ–Ω-–ú—ñ—à–µ–ª—å'];

const generateNewPostCardBtn = document.querySelector('.generate-new');
const container = document.querySelector('.container');
const musicContainer =document.querySelector('.fantastic-music-container');

const history = [];
let counter = 0;
let musicCount = 0;
let magicSentence = '';
let typeWriterIndex = 0;

generateNewPostCardBtn.addEventListener('click', generatePostcard);

function generatePostcard() {
  const blockNumber = generateRandomNumber(3);
  const sentenceNumber = generateRandomNumber(5);
  const optionNumber = generateRandomNumber(10);

  let block, options;

  switch (blockNumber) {
    case 0 :
      block = block_0;
      options = options_0;
      break;
    case 1 :
      block = block_1
      options = options_1;
      break;
    case 2 : 
      block = block_2;
      options = options_2;
      break;
    default :
      break; 
  }

  magicSentence = block[sentenceNumber][0] + options[optionNumber] + block[sentenceNumber][1];

  if (history.includes(magicSentence)) {
    console.log('magic sentence repeated')
    generatePostcard();
    return;
  } else {
    history.push(magicSentence);
  }

  counter++;
  container.innerHTML = '';
  
  if (counter === 15) {
    container.innerHTML = '<div class="reminder">–©–µ –Ω–µ –≤—Ç–æ–º–∏–ª–∞—Å—å? –í—ñ–¥–ø–æ—á–∏–Ω—å —Ç—Ä–æ—Ö–∏: –≤–∏–ø–∏–π –∫–∞–∫–∞–≤—É, –ø–æ—Å–ª—É—Ö–∞–π —Ñ–∞–π–Ω—É –º—É–∑–∏–∫—É üôÇ</div>';
    musicContainer.innerHTML = ` <iframe class="responsive-iframe" src="https://www.youtube.com/embed/bj_r0-Nio38" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>`;
  } else if (counter === 29) {
    container.innerHTML = '<div class="reminder">–ù—ñ—á–æ–≥–æ —Å–æ–±—ñ, –≤–∂–µ 30 –≤–∞–ª–µ–Ω—Ç–∏–Ω–æ–∫! –¶–µ –∫–∞–ø—ñ—Ç–∞–ª—å–Ω–æ. –í—ñ–¥–ø–æ—á–∏–Ω—å —Ç—Ä–æ—Ö–∏: –ø–æ—á–∏—Ç–∞–π –≥–∞—Ä–Ω—É <a href="https://www.themarginalian.org/2021/06/25/jose-ortega-y-gasset-on-love/" target="_blank">—ñ—Å—Ç–æ—Ä—ñ—é</a>, –ø–æ–¥–∏–≤–∏—Å—è —Ñ–∞–π–Ω—ñ <a href="https://www.themarginalian.org/2022/01/16/what-is-love-carson-ellis-mac-barnett/" target="_blank">–∫–∞—Ä—Ç–∏–Ω–∫–∏</a> üôÇ</div>';
  } else if (counter === 59) {
    container.innerHTML = '<div class="reminder">–¢–∏ –º–µ–Ω–µ –¥–∏–≤—É—î—à! –ê–ª–µ –º–æ—è —Ñ–∞–Ω—Ç–∞–∑—ñ—è –Ω–µ –±–µ–∑–º–µ–∂–Ω–∞ üôÇ</div>'
  } else if (counter === 99) {
    container.innerHTML = '<div class="reminder">–î—É–º–∞—é, –Ω–∞ —Å—å–æ–≥–æ–¥–Ω—ñ –¥–æ—Å–∏—Ç—å üôÇ</div>'
    generateNewPostCardBtn.style.visibility = 'hidden';
  } else {
    generateNewPostCardBtn.disabled = true;
    typeWriter();
  }
}

function generateRandomNumber(maxNumber) {
  return Math.floor(Math.random() * maxNumber);
}

function typeWriter() {
  if (typeWriterIndex < magicSentence.length) {
    container.innerHTML += magicSentence.charAt(typeWriterIndex);
    typeWriterIndex++;
    setTimeout(typeWriter, 0);
  } else {
    typeWriterIndex = 0;
    generateNewPostCardBtn.disabled = false;
  }
}
